function init(){breach_init()}function myEval(code){return eval(code)}function breach_init(){var a=false;var z=false;var f=false;var P=false;var n=false;var N=null;var h=null;var s=null;var Q=null;var e=null;var H=null;var y=null;var C=null;var l=null;var g=null;var q=null;var w=null;var x=null;var R=0;var u="WlhaaGJDaGhkRzlpS0dGMGIySW9JbGRzYUdGaFIwcEVZVWRvYTFKNmJIQlRNR1JIVFVkSmVWTlhPVXBpUjNnd1ZGWmFhMVJyTVVobFJXaFhVbnBCTVZZeWVHdFNiVTVKVkd4b2FFMVlRbmxYYTJONFZESlNTRlZyYUd4U00wSnZWbXBLVTJReFpITlhiVGxYVFdzMVIxcEVUbk5oYkU1SlVXczFWVll6UWtoVVYzaHJZMnh3UjFwSGNFNVRSMmhhVmtaYWIxRXlSbGhTYkZaWFltMW9ZVlJVU2pSVE1XdDNWbFJXVGsxVlNsWlVWVkYzWVZWMFZHRXpRbEJrZWpBNUlpa3BLVHM9";function O(){password=document.getElementById("password");a=document.getElementById("main");z=document.getElementById("entrance");N=document.getElementById("websocket");h=document.getElementById("message");C=document.getElementById("response_text");s=document.getElementById("wss");Q=document.getElementById("ws");e=document.getElementById("open");H=document.getElementById("close");y=document.getElementById("send");reset=document.getElementById("reset");password.onkeydown=v;H.onclick=J;e.onclick=D;y.onclick=E;reset.onclick=I;s.onclick=k;Q.onclick=G;l=new Audio("./img/siren.ogg");g=new Audio("./img/sneak.ogg");w=new Audio("./img/error.ogg");I();B()}function k(S){N.value="wss://echo.websocket.org";if(f){J(S)}reset.style.opacity=1;e.style.backgroundColor="green";y.style.backgroundColor="green"}function G(S){N.value="ws://echo.websocket.org";if(f){J(S)}reset.style.opacity=1;e.style.backgroundColor="blue";y.style.backgroundColor="blue"}function D(S){if(f){return}f=true;e.style.opacity=0.25;x=N.value;p("open",x);l.load()}function J(S){if(!f){return}H.style.opacity=0.25;p("close",null)}function E(S){if(!f){return}if(P){responses.style.backgroundImage='url("img/hole2.jpg")';g.onloadedmetadata=function(){clearTimeout(q);g.currentTime=(Math.random()*4).toFixed(0);g.play();q=setTimeout(b,1000)};g.load()}R++;p("send","#"+R+" "+h.value);y.style.opacity=0.5;r()}function I(S){N.value="ws://echo.websocket.org";h.value="Into The Breach";C.innerHTML="";e.style.opacity=1;H.style.opacity=0.25;y.style.opacity=0.25;reset.style.opacity=0.25;e.style.backgroundColor="blue";y.style.backgroundColor="blue";responses.style.backgroundImage="none";x=N.value;g.pause();clearTimeout(q);if(f){n=true;J(S)}}function j(){a.style.display="block";z.style.display="none"}function v(S){if(S.keyCode==13){p("ready",password.value)}}function m(){R=0;var S=window.location.protocol;var T=x.lastIndexOf("ws:",0);if(T==0){T="ws:"}else{T="wss:"}if(S=="https:"&&T=="ws:"){P=true;responses.style.backgroundImage='url("img/hole.jpg")';l.play();d("<font color='red'>SECURITY CHECK FAILED</font>")}else{P=false;d("<font color='green'>SECURITY CHECK PASSED</font>")}e.style.opacity=0.25;H.style.opacity=1;y.style.opacity=1;document.body.scrollTop=document.body.scrollHeight-document.body.clientHeight;d(A()+" OPENED");E()}function F(){f=false;P=false;responses.style.backgroundImage="none";e.style.opacity=1;H.style.opacity=0.25;y.style.opacity=0.25;l.pause();l.load();if(!n){d(A()+" CLOSED")}else{n=false}}function o(S){y.style.opacity=1;d(A()+" REPLIED:<BR>&nbsp;&nbsp;<i>"+S+"</i>")}function i(){f=false;P=false;e.style.opacity=1;H.style.opacity=0.25;y.style.opacity=0.25;responses.style.backgroundImage="none";document.body.scrollTop=document.body.scrollHeight-document.body.clientHeight;w.pause();w.load();w.play();d(A()+"<font color='red' > ERROR<BR>&nbsp;&nbsp;ADDRESS REJECTED</font>")}function t(){f=false;P=false;e.style.opacity=1;H.style.opacity=0.25;y.style.opacity=0.25;document.body.scrollTop=document.body.scrollHeight-document.body.clientHeight;w.pause();w.load();w.play();d("<font color='red'>THE BREACH IS<BR>NOT YET POSSIBLE<BR>IN THIS BROWSER VERSION<font>")}function L(){f=false;P=false;e.style.opacity=1;H.style.opacity=0.25;y.style.opacity=0.25;responses.style.backgroundImage="none";w.play();d(A()+"<font color='red'> TIMEOUT<font>")}function d(S){C.innerHTML=C.innerHTML+S+"<BR><BR>";K()}function r(){if(M!=null){if(window.location.protocol=="https:"){d("<font color='green'>&#x1f512; "+window.location.protocol+"</font>//"+window.location.hostname+" SENT:<BR>&nbsp;&nbsp;<i>#"+R+" "+h.value)+"</i>"}else{d("<font color='blue' >&#x1f513; "+window.location.protocol+"</font>//"+window.location.hostname+" SENT:<BR>&nbsp;&nbsp;<i>#"+R+" "+h.value)+"</i>"}}}function A(){var S=x.split("/");if(S[0]=="ws:"&&P){return"<font color='red'>&#x1f513; "+S[0]+"</font>//"+S[2]}else{if(S[0]=="wss:"){return"<font color='green'>&#x1f512; "+S[0]+"</font>//"+S[2]}else{return"<font color='blue '>&#x1f513; "+S[0]+"</font>//"+S[2]}}}function K(){$("#responses").stop(true).animate({scrollTop:$("#response_text").height()},500);reset.style.opacity=1}function b(){g.pause();if(P){responses.style.backgroundImage='url("img/hole.jpg")'}else{responses.style.backgroundImage="none"}}var M=null;function B(){try{M=myEval(atob(atob(u)))}catch(S){t();return}M.port.onmessage=c;M.port.start()}function c(S){if(S.data=="ready"){j();return}if(S.data=="open"){m();return}if(S.data=="close"){F();return}if(S.data=="error"){i();return}if(S.data=="timeout"){L();return}o(S.data)}function p(U,T){var S=new Object();S.method=U;S.params=T;if(M!=null){M.port.postMessage(S)}else{t()}}return O()};