function init(){rgb_led_matrix_init()}function rgb_led_matrix_init(){var k=true,C=null,o=8,m=1,D=1,G=false,r=new Uint8Array(o*m*3),l=document.getElementById("matrix"),e=l.getContext("2d"),E=window.innerWidth,b=window.innerHeight,B=E/(o+1),t=b/(m+1),n=B*0.4,v=0,u=0,g=null,F=null,s=null,I=null,G=false;function z(J,L,K){k&&console.log("WEBSOCKET: CONNECT");try{s=L;I=K;socket=new WebSocket(J);socket.binaryType="arraybuffer";socket.onopen=y;socket.onclose=H;socket.onerror=d;socket.onmessage=function(N){a(N)}}catch(M){k&&console.log("WEBSOCKET: CONNECT ERROR");k&&console.log(M.message)}}function y(){k&&console.log("WEBSOCKET: OPEN");socket=this;s()}function a(J){k&&console.log("WEBSOCKET: ONMESSAGE");r=new Uint8Array(J.data);x()}function H(J){k&&console.log("WEBSOCKET: ONCLOSE");C=null;I()}function d(J){k&&console.log("WEBSOCKET: ONERROR");k&&console.log(J.message)}function f(L,K){k&&console.log("WEBSOCKET: SEND");var J={method:L,params:K};if(socket.readyState===socket.OPEN){socket.send(p(JSON.stringify(J)))}}function p(N){var K=new ArrayBuffer(N.length);var J=new Uint8Array(K);for(var L=0,M=N.length;L<M;L++){J[L]=N.charCodeAt(L)}return K}function A(){z("ws://localhost:8080",G,q)}function G(){k&&console.log("UI CONNECTED");G=true;f("resize",[8,1])}function q(){k&&console.log("UI DISCONNECTED");G=false}function c(){E=window.innerWidth;b=window.innerHeight;console.log(E);v=0;u=0;l.width=E;l.height=b;l.style.width=E;l.style.height=b;B=E/(o+1);t=b/(m+1);if(B>t){B=t}else{t=B}u=(b-t*(m+1))/2;v=(E-B*(o+1))/2;n=B*0.4}function x(){for(i=0;i<m;i++){for(j=0;j<o;j++){var J=B*(j+1),K=t*(i+1);w(J,K,n,h(j,0))}}}function h(K,N){var M=r[(N*m+K)*3+0],L=r[(N*m+K)*3+1],J=r[(N*m+K)*3+2];return"rgba("+M+","+L+","+J+",1)"}function w(K,M,J,L){e.beginPath();e.arc(K+v,M+u,J,0,2*Math.PI,false);e.fillStyle=L;e.fill();e.lineWidth=1;e.strokeStyle="#080808";e.stroke()}document.getElementsByTagName("BODY")[0].onresize=c};